## API: SMS/Reports

<br>

### **概览**

<br>

`sms/reports` 是 SUBMAIL 的短信分析报告 API

------

<br>

###  URL

<br>

#####  `https://api-v4.mysubmail.com/sms/reports`

------



<br>

### **支持格式**

<br>


| 格式   | URL                                                     |
| ------ | ------------------------------------------------------- |
| `json` | `https://api-v4.mysubmail.com/sms/reports.json`（默认） |
| `xml`  | `https://api-v4.mysubmail.com/sms/reports.xml`          |
| `yaml` | `https://api-v4.mysubmail.com/sms/reports.yaml`         |

------

<br>

### **http 请求方式**

<br>

| 请求方式    | content-type设置                                             |
| ----------- | ------------------------------------------------------------ |
| `http post` | `multipart/form-data、x-www-form-urlencoded、application/json` |

------


<br>

### **是否需要授权**

<br>

##### 是

#####  参阅 [API 授权和验证机制](https://www.mysubmail.com/documents/VBcbe)

------


<br>

### **请求参数**

<br>

| 参数         | 类型          | 必需/可选 | 默认     | 描述                                                         |
| ------------ | ------------- | --------- | -------- | ------------------------------------------------------------ |
| `appid`      | `string`      | `必需`    | 无       | 在 SUBMAIL 应用集成中创建的短信应用ID                        |
| `start_date` | `UNIX 时间戳` | 可选      | 7 天前   | 报告开始时间，unix时间戳，精确到秒 `eg:1640100000`           |
| `end_date`   | `UNIX 时间戳` | 可选      | 1天前    | 报告结束时间，unix时间戳，精确到秒 `eg:1640200000`           |
| `timestamp`  | `UNIX 时间戳` | 可选      | 无       | 参阅 [API 授权与验证机制](https://www.mysubmail.com/documents/VBcbe)  \>  `Timestamp` UNIX 时间戳 |
| `sign_type`  | `string`      | 可选      | `normal` | API 授权模式（  `md5 or sha1 or normal` ）<br>参阅 [API 授权与验证机制](https://www.mysubmail.com/documents/VBcbe)  \>  授权和验证方式 |
| `signature`  | `string`      | `必需`    | 无       | 应用密匙或数字签名<br>参阅 [API授权与验证机制](https://www.mysubmail.com/documents/VBcbe)  \>  授权和验证方式。当sign_type=normal时signature应传appkey的值。 |

------

<br>

### **代码示例**

<br>

##### 发送 CURL请求


```json
curl -d "appid=your_app_id&star_date=1640100000&end_date=1640200000&signature=your_app_key" https://api-v4.mysubmail.com/sms/reports
```



<br>

##### 返回


```json
{
    "status": "success",  //请求状态
    "start_date": "2021-12-21", // 开始日期
    "end_date": "2021-12-22", // 结束日期
    "overview": {		//概览
        "request": 760, // API请求
        "deliveryed": 718, // 成功数
        "dropped": 42,	// 失败数
        "fee": 838,	// 计费数
        "operators": { 		//运营商占比
            "china_mobile": 319, 		//移动
            "china_unicom": 196,	// 联通
            "china_telecom": 213	// 电信
        },
        "location": {			// 地区分类
            "province": { //省份
                "UNKOWN": 24,
                "上海": 186,
                "云南": 12,
                "内蒙古": 3,
                "北京": 43,
                "吉林": 12,
                "四川": 29,
                "天津": 3,
                "宁夏": 3,
                "安徽": 35,
                "山东": 36,
                "山西": 18,
                "广东": 84,
                "广西": 6,
                "新疆": 1,
                "江苏": 63,
                "江西": 7,
                "河北": 7,
                "河南": 20,
                "浙江": 43,
                "海南": 9,
                "湖北": 17,
                "湖南": 32,
                "甘肃": 1,
                "福建": 6,
                "贵州": 20,
                "辽宁": 9,
                "重庆": 7,
                "陕西": 11,
                "青海": 2,
                "黑龙江": 9
            },
            "cities": { //城市
                "UNKOWN": 24,
                "上海 上海": 186,
                "云南 昆明": 1,
                "云南 普洱": 2,
                "云南 红河": 9,
                "内蒙古 通辽": 2,
                "内蒙古 鄂尔多斯": 1,
                "北京 北京": 43,
                "吉林 吉林": 2,
                "吉林 松原": 1,
                "吉林 通化": 5,
                "吉林 长春": 4,
                "四川 乐山": 4,
                "四川 成都": 20,
                "四川 泸州": 1,
                "四川 眉山": 2,
                "四川 雅安": 2,
                "天津 天津": 3,
                "宁夏 吴忠": 2,
                "宁夏 石嘴山": 1,
                "安徽 合肥": 11,
                "安徽 安庆": 5,
                "安徽 宿州": 2,
                "安徽 池州": 5,
                "安徽 淮南": 3,
                "安徽 滁州": 7,
                "安徽 阜阳": 2,
                "山东 临沂": 1,
                "山东 威海": 2,
                "山东 日照": 2,
                "山东 枣庄": 1,
                "山东 济南": 12,
                "山东 济宁": 2,
                "山东 烟台": 5,
                "山东 菏泽": 5,
                "山东 青岛": 6,
                "山西 大同": 2,
                "山西 太原": 3,
                "山西 晋城": 10,
                "山西 运城": 2,
                "山西 长治": 1,
                "广东 东莞": 6,
                "广东 中山": 4,
                "广东 佛山": 2,
                "广东 广州": 27,
                "广东 惠州": 3,
                "广东 揭阳": 2,
                "广东 汕头": 2,
                "广东 汕尾": 2,
                "广东 深圳": 32,
                "广东 潮州": 2,
                "广东 珠海": 1,
                "广东 茂名": 1,
                "广西 北海": 1,
                "广西 南宁": 1,
                "广西 柳州": 1,
                "广西 桂林": 1,
                "广西 玉林": 2,
                "新疆 和田": 1,
                "江苏 南京": 17,
                "江苏 南通": 4,
                "江苏 宿迁": 1,
                "江苏 常州": 7,
                "江苏 徐州": 4,
                "江苏 扬州": 1,
                "江苏 无锡": 6,
                "江苏 淮安": 2,
                "江苏 盐城": 2,
                "江苏 苏州": 19,
                "江西 吉安": 3,
                "江西 萍乡": 1,
                "江西 赣州": 3,
                "河北 保定": 1,
                "河北 石家庄": 2,
                "河北 邢台": 4,
                "河南 信阳": 2,
                "河南 南阳": 4,
                "河南 新乡": 3,
                "河南 洛阳": 2,
                "河南 郑州": 9,
                "浙江 丽水": 1,
                "浙江 台州": 5,
                "浙江 嘉兴": 5,
                "浙江 宁波": 9,
                "浙江 杭州": 11,
                "浙江 温州": 5,
                "浙江 湖州": 1,
                "浙江 衢州": 2,
                "浙江 金华": 4,
                "海南 海口": 9,
                "湖北 十堰": 1,
                "湖北 宜昌": 1,
                "湖北 武汉": 9,
                "湖北 荆门": 4,
                "湖北 襄阳": 2,
                "湖南 湘潭": 2,
                "湖南 益阳": 4,
                "湖南 邵阳": 8,
                "湖南 郴州": 2,
                "湖南 长沙": 16,
                "甘肃 兰州": 1,
                "福建 厦门": 1,
                "福建 漳州": 1,
                "福建 福州": 2,
                "福建 莆田": 2,
                "贵州 贵阳": 11,
                "贵州 遵义": 2,
                "贵州 铜仁": 2,
                "贵州 黔东南": 3,
                "贵州 黔西南": 2,
                "辽宁 大连": 3,
                "辽宁 沈阳": 2,
                "辽宁 辽阳": 4,
                "重庆 重庆": 7,
                "陕西 商洛": 1,
                "陕西 渭南": 4,
                "陕西 西安": 6,
                "青海 西宁": 2,
                "黑龙江 哈尔滨": 3,
                "黑龙江 大庆": 2,
                "黑龙江 鹤岗": 2,
                "黑龙江 齐齐哈尔": 2
            }
        },
        "dropped_reason_analysis": { //失败原因分析
            "号码异常": 4,
            "号码错误": 2,
            "无法投递消息": 3,
            "消息接收超时": 2,
            "空号/停机/关机": 13
        }
    },
    "timeline": [	//时间线
        {
            "date": "2021-12-21", //日期
            "report": {
                "request": 351,	//API请求
                "deliveryed": 335,	//成功数
                "dropped": 16,	//失败数
                "fee": 392	//计费数
            }
        }
    ]
}
```

---



### **错误代码**

<br>

##### 参阅 [API 错误代码](https://www.mysubmail.com/documents/rK2yh3)